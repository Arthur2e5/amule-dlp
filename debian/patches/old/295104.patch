diff -ru amule-1.2.6+rc8.orig/src/filemem.cpp amule-1.2.6+rc8/src/filemem.cpp
--- amule-1.2.6+rc8/src/filemem.cpp	2004-12-11 02:32:13.000000000 +0100
+++ amule-1.2.6+rc8/src/filemem.cpp	2005-02-13 18:53:43.000000000 +0100
@@ -203,7 +203,7 @@
 
 size_t CMemFile::Write(const void* buf, size_t length)
 {
-	if ( length == 0 )
+	if ( length == 0 || buf == NULL )
 		return 0;
 	
 	// Needs more space?
