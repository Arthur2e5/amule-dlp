--- acinclude.m4.orig
+++ acinclude.m4
@@ -258,11 +258,11 @@
 
     LIBPNG_VERSION=`$LIBPNG_CONFIG_WITH_ARGS --version`
     libpng_config_major_version=`echo $LIBPNG_VERSION | \
-           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\1/'`
+           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\).*/\1/'`
     libpng_config_minor_version=`echo $LIBPNG_VERSION | \
-           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\2/'`
+           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\).*/\2/'`
     libpng_config_micro_version=`echo $LIBPNG_VERSION | \
-           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\3/'`
+           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\).*/\3/'`
 
     libpng_requested_major_version=`echo $min_libpng_version | \
            sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\1/'`
--- configure.orig
+++ configure
@@ -6917,11 +6917,11 @@
 
     LIBPNG_VERSION=`$LIBPNG_CONFIG_WITH_ARGS --version`
     libpng_config_major_version=`echo $LIBPNG_VERSION | \
-           sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
+           sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\).*/\1/'`
     libpng_config_minor_version=`echo $LIBPNG_VERSION | \
-           sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\2/'`
+           sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\).*/\2/'`
     libpng_config_micro_version=`echo $LIBPNG_VERSION | \
-           sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\3/'`
+           sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\).*/\3/'`
 
     libpng_requested_major_version=`echo $min_libpng_version | \
            sed 's/\([0-9]*\).\([0-9]*\).\([0-9]*\)/\1/'`
